---
import Layout from "@/layouts/Layout.astro";
---

<Layout title="Killua Animated Wallpaper">
	<canvas id="canvas" width="1920" height="1080"></canvas>
	<audio id="audio" src="audio.mp3"></audio>
</Layout>

<style>
	#canvas {
		position: fixed;
		z-index: 50;
		width: 100dvw;
		height: 100dvh;
		object-fit: cover;
		object-position: 60% 50%;
	}
</style>

<script>
	import imageURLs from "@/config/frames.json";
	import preloadImages from "@/lib/preloadImages";
	import startAnimation from "@/lib/startAnimation";

	const canvas = document.querySelector<HTMLCanvasElement>("#canvas")!;
	const ctx = canvas.getContext("2d")!;

	const images = await preloadImages(imageURLs);
	startAnimation(canvas, ctx, images);
</script>
